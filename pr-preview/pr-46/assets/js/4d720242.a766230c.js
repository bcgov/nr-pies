"use strict";(self.webpackChunknr_pies=self.webpackChunknr_pies||[]).push([["9398"],{17462:function(e,i,s){s.r(i),s.d(i,{frontMatter:()=>a,toc:()=>c,default:()=>h,metadata:()=>t,assets:()=>d,contentTitle:()=>o});var t=JSON.parse('{"id":"spec/element/message/guidelines","title":"Guidelines \u{1F4DD}","description":"PIES Message transmission guidelines and best practices.","source":"@site/docs/spec/element/message/guidelines.md","sourceDirName":"spec/element/message","slug":"/spec/element/message/guidelines","permalink":"/nr-pies/pr-preview/pr-46/docs/spec/element/message/guidelines","draft":false,"unlisted":false,"editUrl":"https://github.com/bcgov/nr-pies/tree/main/docs/spec/element/message/guidelines.md","tags":[{"inline":false,"label":"Business","permalink":"/nr-pies/pr-preview/pr-46/docs/tags/business","description":"Content related to business cases and rationale"},{"inline":false,"label":"Developer","permalink":"/nr-pies/pr-preview/pr-46/docs/tags/developer","description":"Content related to technical structure and implementation"}],"version":"current","lastUpdatedBy":"Jeremy Ho","lastUpdatedAt":1746231917000,"frontMatter":{"id":"guidelines","title":"Guidelines \u{1F4DD}","description":"PIES Message transmission guidelines and best practices.","tags":["business","developer"]},"sidebar":"docSidebar","previous":{"title":"Message Types","permalink":"/nr-pies/pr-preview/pr-46/docs/category/message-types"},"next":{"title":"Process Event Set \u{1F4DD}","permalink":"/nr-pies/pr-preview/pr-46/docs/spec/element/message/process_event_set"}}'),n=s(85893),r=s(50065);let a={id:"guidelines",title:"Guidelines \u{1F4DD}",description:"PIES Message transmission guidelines and best practices.",tags:["business","developer"]},o=void 0,d={},c=[{value:"Identification Headers",id:"identification-headers",level:2},{value:"Transaction Identification",id:"transaction-identification",level:3},{value:"Timestamps and Uniqueness",id:"timestamps-and-uniqueness",level:4},{value:"Message Kind",id:"message-kind",level:4},{value:"System Identification",id:"system-identification",level:3},{value:"Record Identification",id:"record-identification",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"References",id:"references",level:2}];function l(e){let i={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.p,{children:(0,n.jsx)(i.a,{href:"/docs/spec#maturity",children:(0,n.jsx)(i.img,{src:"https://img.shields.io/badge/Maturity-Draft-yellow",alt:"Maturity"})})}),"\n",(0,n.jsx)(i.p,{children:"PIES Message Data Types play an integral role in defining the expected structure of messages. This document outlines\nthe general guidelines and best practices for system to system communication."}),"\n",(0,n.jsx)(i.h2,{id:"identification-headers",children:"Identification Headers"}),"\n",(0,n.jsx)(i.p,{children:"Every PIES message must include the three main types of identification: Transaction, System, and Record. All three of\nthese identifiers work together to ensure that the message can be correctly identified and processed. These identifiers\nmust be included as a part of the JSON payload transmission."}),"\n",(0,n.jsx)(i.h3,{id:"transaction-identification",children:"Transaction Identification"}),"\n",(0,n.jsx)(i.p,{children:"Each PIES transaction must be uniquely identifiable. This requires a timestamp of some kind, a unique identifier, and a\ndeclaration of the PIES version."}),"\n",(0,n.jsx)(i.h4,{id:"timestamps-and-uniqueness",children:"Timestamps and Uniqueness"}),"\n",(0,n.jsxs)(i.p,{children:["The PIES standard uses UUIDv7, as specified in\n",(0,n.jsx)(i.a,{href:"https://datatracker.ietf.org/doc/html/rfc9562#section-5.7",children:"RFC 9562, section 5.7"}),", to address timestamping and\nuniqueness. The first 48 bits of the UUID is used for the timestamp, while the rest of the bits are used for UUID\nversion identification and pseudo-randomity. The UUIDv7 attribute will be used to ensure that the message it is on is\nunique. This attribute is named ",(0,n.jsx)(i.code,{children:"transaction_id"})," and will be a ",(0,n.jsx)(i.code,{children:"string"})," ."]}),"\n",(0,n.jsxs)(i.p,{children:["In addition, as PIES is a versioned specification, it requires a declaration of which version it is compliant to. As the\nversion value follows semver, this attribute is named ",(0,n.jsx)(i.code,{children:"version"})," and will also be a ",(0,n.jsx)(i.code,{children:"string"}),"."]}),"\n",(0,n.jsx)(i.h4,{id:"message-kind",children:"Message Kind"}),"\n",(0,n.jsxs)(i.p,{children:["PIES messages are categorized into different message types. These different kinds of messages will be structured to\ncontain different fields and structures. This attribute is named ",(0,n.jsx)(i.code,{children:"kind"})," and will also be a ",(0,n.jsx)(i.code,{children:"string"}),'. For example, the\nProcessEventSetMessage data type would have kind set to "ProcessEventSet". This attribute is necessary because there\nneeds to be a clean way for parsing systems to quickly identify what kind of document is being transmitted. Inferring\nthe message kind without this attribute could lead to errors in parsing and processing the message.']}),"\n",(0,n.jsx)(i.h3,{id:"system-identification",children:"System Identification"}),"\n",(0,n.jsxs)(i.p,{children:["PIES communication will require knowledge about which system or systems the messages are being emitted from. At this\ntime, we do not yet know if there is a data/system registrar that will authoritatively act as our anchor. In the\ninterim, we will address this by creating an attribute named ",(0,n.jsx)(i.code,{children:"system_id"}),". This field may either be a ",(0,n.jsx)(i.code,{children:"string"}),", or it\nmay be an array of strings, should it be derived from multiple systems."]}),"\n",(0,n.jsx)(i.h3,{id:"record-identification",children:"Record Identification"}),"\n",(0,n.jsxs)(i.p,{children:["Finally, to ensure that the content is properly attributed to the right record in the system, we will have an attribute\nnamed ",(0,n.jsx)(i.code,{children:"record_id"}),". This field will have a type of ",(0,n.jsx)(i.code,{children:"string"}),", and will likely be representative of the primary key of the\nrecord in the source system. An associated ",(0,n.jsx)(i.code,{children:"record_kind"})," will describe what kind of record it represents. This\nattribute will also be a ",(0,n.jsx)(i.code,{children:"string"}),"."]}),"\n",(0,n.jsx)(i.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,n.jsx)(i.p,{children:"As with any messaging protocol, we need to factor in how we intend to cover the security of the message. This includes\nconsiderations for message confidentiality as well as integrity."}),"\n",(0,n.jsx)(i.p,{children:"For most communication scenarios, PIES is intended for transfer between systems on a point-to-point basis. While there\nare future plans for potentially having a pub/sub model for message transfer, this will be out of scope in the interim.\nThe best way for us to ensure point-to-point confidentiality is to make sure we are using standard protocols such as\nHTTPS/TLS connections, as this would be sufficient."}),"\n",(0,n.jsxs)(i.p,{children:["To potentially address future concerns of integrity in a pub/sub model, things such as the JSON Canonicalization Scheme\n(JCS) in ",(0,n.jsx)(i.a,{href:"https://datatracker.ietf.org/doc/html/rfc8785",children:"RFC 8785"})," may be used to ensure that the PIES messages haven't\nbeen tampered with via some form of JWT/JOSE signing pattern. However, this will be out of scope for now and revisited\nwhen it becomes required."]}),"\n",(0,n.jsx)(i.h2,{id:"references",children:"References"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://datatracker.ietf.org/doc/html/rfc8785",children:"RFC 8785"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://datatracker.ietf.org/doc/html/rfc9562#section-5.7",children:"RFC 9562, section 5.7"})}),"\n"]})]})}function h(e={}){let{wrapper:i}={...(0,r.a)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},50065:function(e,i,s){s.d(i,{Z:()=>o,a:()=>a});var t=s(67294);let n={},r=t.createContext(n);function a(e){let i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);